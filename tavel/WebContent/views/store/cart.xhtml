<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:x="http://primefaces.org/ui">

  <ui:composition template="/WEB-INF/templates/page.xhtml">
    <ui:define name="main">
        <!-- JUMBOTRON -->
        <div class="jumbotron jumbotron-fluid text-center" id="main">
            <div class="container">
                <div class="row" style="margin-top:-35px;margin-bottom:-40px;">
                    <img id="logo" src="#{facesContext.externalContext.requestContextPath}/resources/img/logo.png"></img>
                </div>
            </div>
        </div>

        <!-- Container -->
        <h:form prependId="false">
            <table>
                <tr>
                    <th>Delete</th>
                    <th>Item</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Sub Total</th>
                </tr>
                <ui:repeat var="item" value="#{orderItemCtrl.getOrderItemsInCart(orderCtrl.getCartId())}">
                    <tr>
                        <td>
                            <h:form prependId="false">
                                <h:commandLink value="Delete" action="#{orderItemCtrl.destroy(b.ID)}">
                                </h:commandLink>
                            </h:form>
                        </td>
                        <td>#{itemCtrl.items[item.itemId - 1].title}</td>
                        <td>#{itemCtrl.items[item.itemId - 1].price}</td>
                        <td>#{item.quantity}</td>
                        <td>#{itemCtrl.items[item.itemId - 1].price * item.quantity}</td>
                    </tr>
                </ui:repeat>
                <tr>
                    <td>Total</td>
                    <td>Order Total: $#{orderCtrl.getOrder(orderCtrl.getCartId()).price}</td>
                </tr>
            </table>
            <h:commandLink value="Finish Order" action="#{orderCtrl.finishOrder(orderCtrl.getCartId())}"></h:commandLink>
        </h:form>
        <h:button value="Back to Catalog" class="btn btn-lg btn-info" outcome="catalog" />
    </ui:define>
  </ui:composition>
</html>